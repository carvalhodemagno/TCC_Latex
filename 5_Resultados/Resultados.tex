%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Resultados}
\label{chapter:chapter_testes_avaliacao}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Após a confecção da PCB a partir do layout, retratado na seção \ref{section_hardware}, foi possível realizar a montagem dos componentes executando o processo de soldagem manual dos itens contidos na lista de materiais previamente citada na tabela \ref{table:lista_material}. Em seguida, foram realizados testes elétricos e funcionais na placa já montada, representada pela figura \ref{fig:pcb_montada_top}, com o objetivo de validar o projeto de \textit{hardware} desenvolvido, o que resultou na alteração de alguns componentes, como capacitores, visando assim aperfeiçoar o funcionamento da placa.	

\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\columnwidth]{figuras/pcb_montada_top}
	\caption{PCB montada com os componentes.}
	\label{fig:pcb_montada_top}
\end{figure}

Em seguida, o \textit{firmware} desenvolvido foi embarcado no processador já soldado na placa, por meio do conector de gravação, "P3"\,na figura \ref{fig:Schematic_Core_Processor}, e um conversor USB/Serial conectado ao computador.

Após o desenvolvimento da camada de comunicação e a camada de interação com o usuário, foi possível também gerar uma APK (\textit{Android Package}) do aplicativo \textit{mobile} desenvolvido e, após instalação por meio de um gerenciador de arquivos no \textit{smartphone}, a tela principal é exibida, sendo representada aqui pela figura \ref{fig:app_resultado}.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.4\columnwidth]{figuras/app_resultado}
	\caption{Tela principal do aplicativo mobile.}
	\label{fig:app_resultado}
\end{figure}

Em seguida à embarcação do \textit{firmware} e a instalação do aplicativo no \textit{smartphone}, foi possível realizar a integração das partes do projeto e avaliar o desempenho das funcionalidades proposta no Capítulo \ref{chapter:arquitetura_requisitos}. Para isso, foi elaborado um diagrama de conexão entre a carga (condicionador de ar) e o \textit{hardware} implementado, representado pela figura \ref{fig:hardware_connection_diagram}. Tal diagrama auxiliou na conexão da rede elétrica, a placa e o condicionador de ar.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\columnwidth]{figuras/hardware_connection_diagram}
	\caption{Diagrama de conexão do hardware.}
	\label{fig:hardware_connection_diagram}
\end{figure}

\section{Testes das funcionalidades com o condicionador de ar}

Para realizar os testes das funcionalidades, foi utilizado o condicionador de ar representado pela figura \ref{fig:ar_condicionado_multizone}. Como este condicionador de ar é do tipo \textit{split}, aquele no qual a central condensadora e a evaporado são separadas, a tensão elétrica de alimentação é 220 V, com isso foi utilizada uma contatora controlada por esta mesma tensão, lembrando que o uso de uma contatora controlada por tensão diferente do condicionador de ar pode levar ao mal funcionamento do sistema.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\columnwidth]{figuras/ar_condicionado_multizone}
	\caption{Condicionador de ar usado para testes.}
	\label{fig:ar_condicionado_multizone}
\end{figure}

Com o diagrama em mãos, foi feita a conexão do protótipo com o condicionador de ar, abrindo seu conjunto arstop e modificando a conexão já existente com a rede elétrica. Para as conexões foram usados 2 tipos de fiação, um de 6mm de bitola para a alimentação da carga, onde há a maior quantidade de corrente circulando, e um de 1mm para alimentação da placa e para acionamento da contatora, onde a circulação de corrente não é alta. Na figura \ref{fig:conexao_pcb_ar_condicionado}, é possível ver o cabo de 6mm em verde, o cabo de 1mm em branco e os cabos pretos são a alimentação elétrica da carga. O conjunto arstop do condicionador de ar já apresentava proteção para a carga com o uso de um disjuntor bipolar, que foi mantido para execução dos testes.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\columnwidth]{figuras/conexao_pcb_ar_condicionado}
	\caption{Conexão do Hardware desenvolvido com o condicionador de ar.}
	\label{fig:conexao_pcb_ar_condicionado}
\end{figure}

Em seguida, o sistema completo foi testado com o uso do aplicativo para realizar as requisições. A imagem \ref{fig:respostas_app} mostra as repostas das requisições no aplicativo, para cada funcionalidade.

\begin{figure}[H]
	\centering
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/testes/ar_ligado}
		\caption{Ligar o ar.}
		\label{fig:ar_ligado}
	\end{subfigure}
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/testes/ar_desligado}
		\caption{Desligar o ar.}
		\label{fig:ar_desligado}
	\end{subfigure}
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/testes/temporizador_ligar}
		\caption{Escolher horário para ligar.}
		\label{fig:temporizador_ligar}
	\end{subfigure}
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/testes/temporizador_desligar}
		\caption{Escolher horário para desligar.}
		\label{fig:temporizador_desligar}
	\end{subfigure}
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/testes/ligou_com_temporizador}
		\caption{Horário para ligar atingido.}
		\label{fig:ligou_com_temporizador}
	\end{subfigure}
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/testes/desligou_com_temporizador}
		\caption{Horário para desligar atingido.}
		\label{fig:desligou_com_temporizador}
	\end{subfigure}
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/testes/pessoa_detectada}
		\caption{Verificação de presença humana quando detectada.}
		\label{fig:pessoa_detectada}
	\end{subfigure}
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/testes/pessoa_nao_detectada}
		\caption{Verificação de presença humana quando não detectada.}
		\label{fig:pessoa_nao_detectada}
	\end{subfigure}
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/testes/consumo}
		\caption{Verificar consumo de energia elétrica.}
		\label{fig:consumo}
	\end{subfigure}
	\caption{Retorno às requisições realizadas pelo aplicativo \textit{mobile}.}
	\label{fig:respostas_app}
\end{figure}

Levando em consideração o acesso à internet para realizar a comunicação entre o aplicativo e o \textit{hardware}, o sistema apresentou respostas rápidas às requisições feitas pelo usuário. Entretanto, as funcionalidades de escolher horário, tanto para ligar quanto para desligar, apresentaram uma demora de 15 segundos, em média, a serem executadas após horário escolhido ser atingido. Isso é devido ao tempo necessário para a atualização do horário no servidor onde o \textit{firmware} consulta tais informações.

\section{Avaliação do circuito de medição de energia elétrica}
\label{sec:aval_medidor_energia}
Com o objetivo de avaliar o desempenho do circuito de medição de energia elétrica, foi selecionado um alicate amperímetro devidamente calibrado, representado pela figura \ref{fig:alicate_amperimetro_minipa}, para realizar as medidas juntamente com a placa. Os testes seguiram as premissas abaixo:

\begin{itemize}
	\item Medições realizadas com o funcionamento do sistema completo, ou seja, os valores obtidos por meio das requisições no aplicativo;
	\item Realização das medidas no momento de partida do compressor do condicionador de ar;
	\item Realização de 30 medições para cada grandeza (frequência, corrente, tensão e potência ativa);
	\item A medição de potência ativa por parte do alicate amperímetro realizada de forma indireta, ou seja, retirada a partir das medições de tensão, corrente e fator de potência;
\end{itemize}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.4\columnwidth]{figuras/alicate_amperimetro_minipa}
	\caption{Alicate amperímetro ET-3367C \cite{alicate_amperimetro_minipa}.}
	\label{fig:alicate_amperimetro_minipa}
\end{figure}

É possível observar uma representação gráfica, nas figuras \ref{fig:graficos_medicao_corrente}, \ref{fig:graficos_medicao_frequencia}, \ref{fig:graficos_medicao_potencia} e \ref{fig:grafios_medicao_tensão}, do comparativo entre as medições realizadas pelo protótipo e pelo alicate amperímetro, gerada a partir dos dados contidos nas tabelas do Apêndice \ref{apendice:medicoes}. 

As figuras \ref{fig:plot_corrente.eps} e \ref{fig:plot_potencia.eps}, representam claramente o comportamento do consumo de energia pelo condicionador de ar quando acontece a partida do compressor para iniciar o resfriamento do ambiente. 

\begin{figure}[H]
	\centering
	\begin{subfigure}{1\textwidth}
		\centering
		\includegraphics[width=0.675\columnwidth]{figuras/plot_tensao.eps}
		\caption{Medidas de tensão do protótipo e do alicate amperímetro.}
		\label{fig:plot_tensao.eps}
	\end{subfigure}
	\begin{subfigure}{1\textwidth}
		\centering
		\includegraphics[width=0.675\columnwidth]{figuras/erro_tensao.eps}
		\caption{Erro relativo e absoluto.}
		\label{fig:erro_tensao.eps}
	\end{subfigure}
	\caption{Comparação entre o protótipo e o alicate amperímetro ET-3367C para tensão.}
	\label{fig:grafios_medicao_tensão}
\end{figure}

\begin{figure}[H]
	\centering
	\begin{subfigure}{1\textwidth}
		\centering
		\includegraphics[width=0.675\columnwidth]{figuras/plot_corrente.eps}
		\caption{Medidas de corrente do protótipo e do alicate amperímetro.}
		\label{fig:plot_corrente.eps}
	\end{subfigure}
	\begin{subfigure}{1\textwidth}
		\centering
		\includegraphics[width=0.675\columnwidth]{figuras/erro_corrente.eps}
		\caption{Erro relativo e absoluto.}
		\label{fig:erro_corrente.eps}
	\end{subfigure}
	\caption{Comparação entre o protótipo e o alicate amperímetro ET-3367C para corrente.}
	\label{fig:graficos_medicao_corrente}
\end{figure}

\begin{figure}[H]
	\centering
	\begin{subfigure}{1\textwidth}
		\centering
		\includegraphics[width=0.675\columnwidth]{figuras/plot_frequencia.eps}
		\caption{Medidas de frequência do protótipo e do alicate amperímetro.}
		\label{fig:plot_frequencia.eps}
	\end{subfigure}
	\begin{subfigure}{1\textwidth}
		\centering
		\includegraphics[width=0.675\columnwidth]{figuras/erro_frequencia.eps}
		\caption{Erro relativo e absoluto.}
		\label{fig:erro_frequencia.eps}
	\end{subfigure}
	\caption{Comparação entre o protótipo e o alicate amperímetro ET-3367C para frequência.}
	\label{fig:graficos_medicao_frequencia}
\end{figure}

\begin{figure}[H]
	\centering
	\begin{subfigure}{1\textwidth}
		\centering
		\includegraphics[width=0.675\columnwidth]{figuras/plot_potencia.eps}
		\caption{Medidas de potencia ativa do protótipo e do alicate amperímetro.}
		\label{fig:plot_potencia.eps}
	\end{subfigure}
	\begin{subfigure}{1\textwidth}
		\centering
		\includegraphics[width=0.675\columnwidth]{figuras/erro_potencia.eps}
		\caption{Erro relativo e absoluto.}
		\label{fig:erro_potencia.eps}
	\end{subfigure}
	\caption{Comparação entre o protótipo e o alicate amperímetro ET-3367C para potência ativa.}
	\label{fig:graficos_medicao_potencia}
\end{figure}

É possível observar que os maiores erros relativos são 0.2498\%, 1.16\%, 0.85\% e 0.18\% para a frequência, corrente, tensão e potência ativa, respectivamente. Os erros são devido principalmente à calibração prévia do CI medidor, que garante uma precisão na variação de 2\% a 3\% conforme o \textit{datasheet} \cite{MCP39F521_Datasheet}, e o atraso para a atualização das informações nos registradores, uma vez que o CI processa os dados antes de fornecê-los para acesso. 
