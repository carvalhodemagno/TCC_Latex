%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Resultados}
\label{chapter:chapter_testes_avaliacao}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Após a confecção da PCB a partir do layout, retratado na seção \ref{section_hardware}, foi possível realizar a montagem dos componentes executando o processo de soldagem manual dos itens contidos na lista de materiais previamente citada na tabela \ref{table:lista_material}. Em seguida, foram realizados testes elétricos e funcionais na placa já montada, representada pela figura \ref{fig:pcb_montada_top}, com o objetivo de validar o projeto de \textit{hardware} desenvolvido, o que resultou na alteração de alguns componentes, como capacitores, visando assim aperfeiçoar o funcionamento da placa.	

\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\columnwidth]{figuras/pcb_montada_top}
	\caption{PCB montada com os componentes.}
	\label{fig:pcb_montada_top}
\end{figure}

Em seguida, o \textit{firmware} desenvolvido foi embarcado no processador já soldado na placa, por meio do conector de gravação, "P3"\,na figura \ref{fig:Schematic_Core_Processor}, e um conversor USB/Serial conectado ao computador.

Após o desenvolvimento da camada de comunicação e a camada de interação com o usuário, foi possível também gerar uma APK (\textit{Android Package}) do aplicativo \textit{mobile} desenvolvido e, após instalação por meio de um gerenciador de arquivos no \textit{smartphone}, a tela principal é exibida, sendo representada aqui pela figura \ref{fig:app_resultado}.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.4\columnwidth]{figuras/app_resultado}
	\caption{Tela principal do aplicativo mobile.}
	\label{fig:app_resultado}
\end{figure}

Em seguida à embarcação do \textit{firmware} e a instalação do aplicativo no \textit{smartphone}, foi possível realizar a integração das partes do projeto e avaliar o desempenho das funcionalidades proposta no Capítulo \ref{chapter:arquitetura_requisitos}. Para isso, foi elaborado um diagrama de conexão entre a carga (condicionador de ar) e o \textit{hardware} implementado, representado pela figura \ref{fig:hardware_connection_diagram}. Tal diagrama auxiliou na conexão da rede elétrica, a placa e o condicionador de ar.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\columnwidth]{figuras/hardware_connection_diagram}
	\caption{Diagrama de conexão do hardware.}
	\label{fig:hardware_connection_diagram}
\end{figure}

\section{Testes das funcionalidades com o condicionador de ar}

Para realizar os testes das funcionalidades, foi utilizado o condicionador de ar representado pela figura \ref{fig:ar_condicionado_multizone}. Como este condicionador de ar é do tipo \textit{split}, aquele no qual a central condensadora e a evaporado são separadas, a tensão elétrica de alimentação é 220 V, com isso foi utilizada uma contatora controlada por esta mesma tensão, lembrando que o uso de uma contatora controlada por tensão diferente do condicionador de ar pode levar ao mal funcionamento do sistema.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\columnwidth]{figuras/ar_condicionado_multizone}
	\caption{Condicionador de ar usado para testes.}
	\label{fig:ar_condicionado_multizone}
\end{figure}

Com o diagrama em mãos, foi feita a conexão do protótipo com o condicionador de ar, abrindo seu conjunto arstop e modificando a conexão já existente com a rede elétrica. Para as conexões foram usados 2 tipos de fiação, um de 6mm de bitola para a alimentação da carga, onde há a maior quantidade de corrente circulando, e um de 1mm para alimentação da placa e para acionamento da contatora, onde a circulação de corrente não é alta. Na figura \ref{fig:conexao_pcb_ar_condicionado}, é possível ver o cabo de 6mm em verde, o cabo de 1mm em branco e os cabos pretos são a alimentação elétrica da carga. O conjunto arstop do condicionador de ar já apresentava proteção para a carga com o uso de um disjuntor bipolar, que foi mantido para execução dos testes.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\columnwidth]{figuras/conexao_pcb_ar_condicionado}
	\caption{Conexão do Hardware desenvolvido com o condicionador de ar.}
	\label{fig:conexao_pcb_ar_condicionado}
\end{figure}

Em seguida o sistema completo foi testado com o uso do aplicativo para fazer as requisições. A imagem \ref{fig:respostas_app} mostra as repostas das requisições após a execução.

\begin{figure}[H]
	\centering
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/integration_timer_on}
		\caption{Requisição de temporizador para ligar.}
		\label{fig:integration_timer_on}
	\end{subfigure}
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/integration_timer_off}
		\caption{Requisição de temporizador para desligar.}
		\label{fig:integration_timer_off}
	\end{subfigure}
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/integration_person_detected}
		\caption{Requisição de presença humana quando detectada.}
		\label{fig:integration_person_detected}
	\end{subfigure}
	\begin{subfigure}{0.3\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/integration_person_not_detected}
		\caption{Requisição de presença humana quando não detectada.}
		\label{fig:integration_person_not_detected}
	\end{subfigure}
	\caption{Medições realizadas pela placa em comparação ao alicate amperímetro ET-3367C.}
	\label{fig:respostas_app}
\end{figure}

Levando em consideração o acesso à internet para realizar a comunicação entre o aplicativo e o \textit{hardware}, o sistema apresentou respostas rápidas às requisições feitas pelo usuário. Entretanto, as funcionalidades de escolher horário, tanto para ligar quanto para desligar, apresentaram uma demora de 15 segundos, em média, a serem executadas no horário escolhido. Isso é devido ao tempo necessário para a atualização do horário no servidor onde o \textit{hardware} consulta tais informações.

\section{Avaliação do circuito de medição de energia elétrica}
\label{sec:aval_medidor_energia}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.4\columnwidth]{figuras/alicate_amperimetro_minipa}
	\caption{Alicate amperímetro ET-3367C \cite{alicate_amperimetro_minipa}.}
	\label{fig:alicate_amperimetro_minipa}
\end{figure}

\begin{figure}[H]
	\centering
	\begin{subfigure}{1\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/plot_frequencia.eps}
		\caption{Medição de frequência.}
		\label{fig:plot_frequencia.eps}
	\end{subfigure}

	\begin{subfigure}{1\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/plot_corrente.eps}
		\caption{Medição de corrente.}
		\label{fig:plot_corrente.eps}
	\end{subfigure}

	\begin{subfigure}{1\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/plot_tensao.eps}
		\caption{Medição de tensão.}
		\label{fig:plot_tensao.eps}
	\end{subfigure}

	\begin{subfigure}{1\textwidth}
		\centering
		\includegraphics[width=0.75\columnwidth]{figuras/plot_potencia.eps}
		\caption{Medição de potência.}
		\label{fig:plot_potencia.eps}
	\end{subfigure}
	\caption{Medições realizadas pela placa em comparação ao alicate amperímetro ET-3367C.}
	\label{fig:comparacao_medicao}
\end{figure}